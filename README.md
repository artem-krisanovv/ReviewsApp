# ReviewsApp - iOS Application

## Описание проекта

ReviewsApp - это iOS приложение для отображения отзывов пользователей с поддержкой изображений, рейтингов и интерактивного интерфейса. Проект демонстрирует современные подходы к разработке iOS приложений с использованием MVVM архитектуры, Dependency Injection и асинхронного программирования.

## Архитектура проекта

### Основные принципы архитектуры

Проект построен на основе **MVVM (Model-View-ViewModel)** архитектуры с дополнительными паттернами:

- **MVVM** - для разделения логики представления и бизнес-логики
- **Dependency Injection** - для управления зависимостями
- **Protocol-Oriented Programming** - для обеспечения тестируемости и гибкости
- **Factory Pattern** - для создания экранов и компонентов

### Структура проекта

```
Test/
├── Screens/Reviews/           # Экран отзывов
│   ├── Controller/           # ViewController
│   ├── View/                # UI компоненты
│   ├── ViewModel/           # Бизнес-логика
│   ├── Factory/             # Фабрика для создания экрана
│   └── Provider/            # Провайдер данных
├── Services/                 # Сервисы
│   ├── Network/             # Сетевой слой
│   ├── ImageService/        # Сервис загрузки изображений
│   ├── Caching/             # Система кэширования
│   └── DI/                  # Dependency Injection
├── Model/                   # Модели данных
├── Extensions/              # Расширения
├── Constants/               # Константы
└── Protocols/               # Протоколы
```

## Технические решения

### 1. Сетевой слой

Использование `async/await` для асинхронных запросов, протокол-ориентированный подход для тестируемости, обработка ошибок через `NetworkError` enum.

```swift
protocol NetworkServiceProtocol {
    func request<T: Decodable>(_ endpoint: String) async throws -> T
}
```

### 2. Система кэширования изображений

Адаптивный размер кэша на основе доступной памяти устройства, thread-safe операции с использованием `DispatchQueue`, умная очистка при нехватке памяти.

```swift
let physicalMemory = ProcessInfo.processInfo.physicalMemory
let maxCacheSize = min(50 * 1024 * 1024, Int(Double(physicalMemory) * 0.25))
```

### 3. Dependency Injection

Централизованное управление зависимостями через синглтон контейнер:

```swift
final class DIContainer {
    static let shared = DIContainer()
    
    lazy var networkService: NetworkServiceProtocol = {
        NetworkService()
    }()
    
    lazy var imageService: ImageServiceProtocol = {
        ImageService(cache: imageCache)
    }()
}
```

### 4. MVVM реализация

**ViewModel** - централизованное управление состоянием, асинхронная загрузка, оптимизация производительности.

**View** - программное создание UI с Auto Layout, поддержка pull-to-refresh.

**Controller** - обработка пользовательских действий, управление состоянием UI.

## Backend Server

### Технологии

- Swift + Swifter framework
- REST API с поддержкой фильтрации
- JSON формат данных

### API Endpoints

```
GET /reviews - получение всех отзывов
GET /reviews?user={id} - фильтрация по пользователю
GET /reviews?id={id} - получение конкретного отзыва
```

## Запуск проекта

### iOS приложение

1. Откройте `Test.xcodeproj` в Xcode
2. Выберите симулятор или устройство
3. Нажмите `Cmd + R` для запуска

### Backend сервер

1. Перейдите в папку `ReviewServer`
2. Выполните команду:
```bash
swift run
```
3. Сервер запустится на порту 8080

## Производительность

### Оптимизации

1. Кэширование изображений с адаптивным размером
2. Загрузка данных по требованию
3. Автоматическая очистка неиспользуемых ресурсов
4. Асинхронная загрузка в фоне

### Метрики

- Время загрузки: < 2 секунд для первого экрана
- Оптимизированное использование памяти
- Плавная прокрутка при 60 FPS

## Тестирование

Проект готов к добавлению unit и integration тестов благодаря:

- Protocol-Oriented Design - легко создавать моки
- Dependency Injection - изоляция компонентов
- Separation of Concerns - четкое разделение ответственности

## Возможности для расширения

1. Pagination - поддержка пагинации для больших списков
2. Offline Mode - кэширование данных для работы без интернета
3. Push Notifications - уведомления о новых отзывах
4. Search - поиск по отзывам
5. User Authentication - система авторизации

## Ключевые технические решения

### 1. Асинхронное программирование
- Использование современного `async/await` вместо completion handlers
- Правильная обработка отмены операций через `Task.isCancelled`

### 2. Memory Management
- Слабая ссылка на делегаты (`weak var delegate`)
- Автоматическая очистка кэша при нехватке памяти
- Отмена операций при деинициализации

### 3. Thread Safety
- Использование `actor` для `ImageService`
- `DispatchQueue` с барьерами для кэша
- `@MainActor` для UI обновлений

### 4. Error Handling
- Централизованная обработка ошибок
- Пользовательские сообщения об ошибках
- Graceful degradation при сбоях сети

## Демонстрация навыков

Этот проект показывает, что я умею:

- Работать с современными архитектурными паттернами в iOS (MVVM, DI)
- Писать асинхронный код с использованием async/await
- Оптимизировать производительность приложений
- Правильно управлять памятью и избегать утечек
- Создавать масштабируемый и поддерживаемый код
- Разрабатывать backend на Swift
- Проектировать REST API
- Думать о пользовательском опыте

